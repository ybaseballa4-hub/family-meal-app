# 魔法のキッチン - 機能一覧

## 概要

家族の献立計画を自動化し、買い物から調理まで一貫してサポートする献立管理アプリです。

---

## 主要機能

### 1. 認証機能
- メールアドレスとパスワードによるユーザー登録
- ログイン/ログアウト
- セッション管理
- ユーザーごとのデータ分離

### 2. 献立自動生成
- 1週間分の献立を自動生成
- ユーザーの好みを反映
- 苦手な食材の自動除外
- バラエティ豊かな料理の選択
- 主菜・副菜・汁物のバランス調整
- 個別料理の差し替え機能

### 3. カレンダー機能
- 月次カレンダー表示
- 日付ごとの献立表示
- 献立の追加・削除
- 調理済みマーク
- 料理メモの記録
- 過去の献立履歴の閲覧

### 4. 評価システム
- **おいしさ評価**（5段階星評価）
- **調理時間評価**（5段階星評価）
- **リピート希望度**（5段階星評価）
- 自由記述メモ
- 総合スコア自動計算
- A〜Dランクの自動付与

### 5. お気に入り管理
- 評価済み料理の一覧表示
- ランク別フィルタリング（お気に入り、A級、B級、C級、D級）
- 最終調理日の表示
- お気に入りへの追加/削除
- 詳細評価の表示

### 6. 買い物リスト
- 献立からの食材自動抽出
- カテゴリ別整理
- チェックボックスによる購入管理
- チェック状態の永続化
- ショッピングモード（大きな表示）
- リストの手動編集可能

### 7. 家族モード
- 家族メンバーの登録
- メンバーごとの好きな料理設定
- メンバーごとの苦手な食材設定
- 個人モード/家族モード切り替え
- 家族全員の好みを考慮した献立生成

### 8. 在庫管理
- 食材の登録（名前、数量、単位）
- カテゴリ別分類
  - 野菜
  - 肉類
  - 魚介類
  - 乳製品
  - 調味料
  - その他
- 在庫の削除

### 9. ユーザー設定
- 好きな料理の登録・管理
- 苦手な食材の登録・管理
- 家族モードのオン/オフ
- 設定の即時反映

---

## 技術仕様

### フロントエンド
- **フレームワーク**: React 18.3
- **言語**: TypeScript
- **ビルドツール**: Vite 5.4
- **スタイリング**: Tailwind CSS 3.4
- **アイコン**: Lucide React

### バックエンド
- **データベース**: Supabase (PostgreSQL)
- **認証**: Supabase Auth
- **API**: Supabase Client SDK

### データベース構造

#### テーブル一覧

1. **user_settings**
   - ユーザーごとの基本設定
   - 好きな料理リスト
   - 苦手な食材リスト
   - 家族モード設定

2. **family_members**
   - 家族メンバー情報
   - メンバーごとの好み設定

3. **favorites**
   - お気に入り料理リスト

4. **weekly_menus**
   - 週次献立データ
   - 開始日と終了日
   - 献立のJSON形式保存

5. **cooking_history**
   - 調理履歴
   - 評価データ（おいしさ、調理時間、リピート希望）
   - 総合スコアとランク
   - メモ

6. **shopping_list_checks**
   - 買い物リストのチェック状態

7. **inventory**
   - 在庫データ
   - 食材名、数量、単位、カテゴリ

### セキュリティ

- Row Level Security (RLS) による行レベルアクセス制御
- ユーザーごとのデータ分離
- 認証済みユーザーのみがデータにアクセス可能
- 自分のデータのみ読み書き可能

---

## データフロー

### 献立生成フロー
1. ユーザーが「新しい週のメニューを生成」をクリック
2. user_settingsから好みと除外食材を取得
3. 家族モードがオンの場合、family_membersのデータも取得
4. cooking_historyから過去の評価を参照
5. 条件に基づいて7日分の献立を生成
6. weekly_menusテーブルに保存

### 評価保存フロー
1. カレンダーから料理をクリック
2. 評価ダイアログで各項目を入力
3. 総合スコアを自動計算
4. ランク（A〜D）を自動判定
5. cooking_historyテーブルに保存（重複の場合は更新）

### 買い物リスト生成フロー
1. 「買い物リストを生成」をクリック
2. 現在の週の献立を取得
3. 各料理から必要な食材を抽出
4. カテゴリ別に整理
5. shopping_list_checksから既存のチェック状態を復元

---

## UI/UX特徴

### デザイン原則
- クリーンでモダンなインターフェース
- 直感的な操作性
- レスポンシブデザイン
- タッチフレンドリー
- 視覚的フィードバック

### カラースキーム
- 温かみのあるオレンジをアクセントカラーに使用
- 清潔感のある白ベース
- 読みやすいグレーのテキスト
- ランク別の色分け（ゴールド、シルバー、ブロンズ）

### ナビゲーション
- ボトムナビゲーション（5つのタブ）
  - ホーム
  - 基本設定
  - メニュー
  - お気に入り
  - カレンダー
  - 買い物
  - 在庫

### インタラクション
- スムーズなアニメーション
- ホバー効果
- タップフィードバック
- モーダルダイアログ
- トースト通知（実装可能）

---

## 将来の拡張可能性

### 短期的な改善
- レシピ詳細の表示
- 調理手順のステップ表示
- 栄養情報の追加
- カロリー計算
- アレルギー情報管理

### 中期的な機能追加
- レシピのシェア機能
- コミュニティ機能
- 季節の食材提案
- 食費管理
- 写真アップロード

### 長期的なビジョン
- AI による献立最適化
- 栄養バランス自動調整
- スーパーの特売情報連携
- 音声入力対応
- スマートデバイス連携

---

## パフォーマンス最適化

- Supabase のリアルタイムサブスクリプション活用
- クライアントサイドキャッシング
- 遅延読み込み
- 最適化されたクエリ
- インデックスの適切な設定

---

## アクセシビリティ

- セマンティックHTML
- キーボードナビゲーション対応
- 適切なコントラスト比
- スクリーンリーダー対応可能
- フォーカスインジケーター

---

**魔法のキッチン - 毎日の献立をもっと楽しく、もっと簡単に。**
